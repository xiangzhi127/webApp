define(function(require,t,e){function i(t){this.config=this.extend(this.extend({},r),t)}var n=i.prototype;n.support=function(){var t="test",e=sessionStorage;try{e.setItem(t,1);e.removeItem(t);return!0}catch(i){alert("您可能启用了无痕浏览模式，开启后将无法为您节省流量且会导致部分功能无法使用，建议关闭无痕浏览后继续访问。");return!1}}();n.extend=function(t,e){if(t&&typeof t=="object"&&e&&typeof e=="object"){for(var i in e){e[i]&&(t[i]=e[i])}}return t};n.getKey=function(t){return(t+"").toUpperCase()};n.getTime=function(t){return+new Date+(+t||0)};n.setExpiredTime=function(t){this.config.timeout=parseInt(t,10);return this};n.set=function(t,e,i){var n=this;var r=this.config.type;t=this.getKey(t);var o=this.getTime(i||this.config.timeout);if(e&&typeof e=="function"){e=e(n.get(t))}var s={data:e,timeout:o,savetime:this.getTime()};s=JSON.stringify(s);this.setItem(r,t,s);return this};n.get=function(t){var e=this;var i=this.config.type;t=this.getKey(t);var n;n=this.getItem(i,t);n=n&&JSON.parse(n);if(n&&n.timeout>e.getTime()){return n.data}else{e.clear(t)}return null};n.clear=function(t){var e=this.config.type;t=this.getKey(t);this.removeItem(e,t);return this};n.setItem=function(t,e,i){var n=this.support,r=this,o;if(n){window[t+"Storage"].setItem(e,i)}else{o=r.getWindowName();o[e]=i;r.setWindowName(o)}};n.getItem=function(t,e){var i=this.support,n=this,r;if(i){r=window[t+"Storage"].getItem(e)}else{r=n.getWindowName();r=r&&r[e]}return r};n.removeItem=function(t,e){var i=this.support,n=this,r;if(i){r=window[t+"Storage"].removeItem(e)}else{r=n.getWindowName();r&&delete r[e];n.setWindowName(r)}};n.getWindowName=function(){var t=window.name;try{t=JSON.parse(t)}catch(e){t={}}return t};n.setWindowName=function(t){t=t||{};window.name=JSON.stringify(t)};var r={timeout:365*24*60*60*1e3,type:"local"};e.exports=i});